(function(t){function e(e){for(var r,c,i=e[0],u=e[1],l=e[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/kuan-vue-waterfall/demo/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var p=u;o.push(["0441","chunk-vendors"]),n()})({"0441":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("9d41");var r=n("7a23"),a={key:0},o={class:"card"};function c(t,e,n,c,i,u){var l=Object(r["resolveComponent"])("water-fall");return i.data.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])(l,{gap:"10px",width:"250px",class:"container",data:i.data,delay:!0},{default:Object(r["withCtx"])((function(t){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("img",{class:"img",src:t.src,onClick:function(e){return u.preview(t.src,e)}},null,8,["src","onClick"]),Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(t.src),1)])]})),_:1},8,["data"]),Object(r["createVNode"])("button",{class:"halo-btn halo-btn-primary",onClick:e[1]||(e[1]=Object(r["withModifiers"])((function(){return u.loadMore.apply(u,arguments)}),["stop","prevent"]))},"加载更多")])):Object(r["createCommentVNode"])("",!0)}n("99af"),n("d81d"),n("d3b7"),n("ddb0");var i=n("2909"),u=(n("96cf"),n("1da1")),l={ref:"container"},p={key:0,class:"water-fall-more"},f=Object(r["createVNode"])("i",{class:"waterfall-loading"},null,-1),d=Object(r["createVNode"])("span",null,"加载中...",-1);function s(t,e,n,a,o,c){var i=Object(r["resolveComponent"])("water-fall-item");return Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["createVNode"])("div",{class:"kuan-vue-waterfall",style:{width:a.containerWidth,height:"".concat(a.containerHeight,"px")}},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a.list,(function(e,o){return Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:e.key||e.id,item:e,delay:n.delay,class:{loaded:e.loaded},style:{padding:a.padding,width:a.itemWidth,left:"".concat(e.left||0,"px"),top:e.loaded?"".concat(e.top||0,"px"):"100%"},onLoad:function(t){return a.load(o,t)}},{default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(t.$slots,"default",e)]})),_:2},1032,["item","delay","class","style","onLoad"])})),128))],4),a.loadedData.length<n.data.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",p,[f,d])):Object(r["createCommentVNode"])("",!0)],512)}n("fb6a"),n("a9e3");var h=n("5c90"),g=n("5530"),b=(n("4160"),n("159b"),n("d4ec")),j=n("bee2");function v(t){for(var e=0,n=1;n<t.length;n++)t[n]<t[e]&&(e=n);return e}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.length<t?(n.push(e()),m(t,e,n)):n}function O(t){return/^\d*$/.test(t)?"".concat(t,"px"):t}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(n,r){var a=e[r]||{};a.key===n.key&&(t[r]=a)})),t}var w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;Object(b["a"])(this,t),this.data=[],this.colNum=n,this.containerHeight=0,this.itemWidth=e,this.heightList=m(this.colNum)}return Object(j["a"])(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.data=[],this.heightList=m(this.colNum),this.prepare(t)}},{key:"prepare",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){var n=v(t.heightList);e.loaded||(e.left=n*t.itemWidth,e.top=Math.min.apply(Math,Object(i["a"])(t.heightList)),e.loaded=1),t.heightList[n]+=e.height||100})),this.containerHeight=Math.max.apply(Math,Object(i["a"])(this.heightList).concat([0])),this.data=this.data.length?[].concat(Object(i["a"])(this.data),Object(i["a"])(e)):e,this.iret()}},{key:"resize",value:function(t,e){this.itemWidth=t,this.colNum=e;var n=this.data.map((function(t){return t.loaded=0,t}));return this.init(n)}},{key:"iret",value:function(){return{data:this.data,containerHeight:this.containerHeight}}}]),t}(),k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r["reactive"])({list:e,containerWidth:"100%",containerHeight:0}),a=Object(r["ref"])(null),o=null,c=1,l=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.data,o=e.containerHeight,c=window.scrollY,n.list=n.list.length>a.length?[].concat(Object(i["a"])(a),Object(i["a"])(n.list.slice(a.length))):a,n.containerHeight=o,t.next=6,Object(r["nextTick"])();case 6:window.scrollTo({top:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(t){o&&l(o.init(t))},f=function(){c=Math.floor(a.value.clientWidth/t)||1,n.containerWidth="".concat(c*t,"px")},d=function(){f(),o=new w(t,c)},s=Object(h["debounce"])((function(){o&&(f(),l(o.resize(t,c)))}));return Object(r["onMounted"])((function(){d(),window.addEventListener("resize",s)})),Object(r["onBeforeMount"])((function(){window.removeEventListener("resize",s)})),Object(g["a"])(Object(g["a"])({},Object(r["toRefs"])(n)),{},{container:a,initData:p,setState:function(t){return n.list=t}})},x={class:"water-fall-item",ref:"container"};function M(t,e,n,a,o,c){return Object(r["openBlock"])(),Object(r["createBlock"])("div",x,[Object(r["renderSlot"])(t.$slots,"default")],512)}n("3ca3");function N(t){return t.complete?Promise.resolve(!0):new Promise((function(e){t.onload=e,t.onerror=e}))}var B=function(t){return Promise.all(Object(i["a"])(t).map((function(t){return N(t)})))},W={props:{item:{type:Object,default:function(){return{}}},delay:{type:Boolean,default:!0}},emits:["load"],setup:function(t,e){var n=e.emit,a=Object(r["ref"])(),o=function(){return Object(g["a"])(Object(g["a"])({},t.item),{},{height:a.value?a.value.clientHeight:200})},c=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B(a.value.querySelectorAll("img"));case 2:setTimeout((function(){n("load",o())}),150);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){n("load",o())};return Object(r["onMounted"])(t.delay?c:i),{container:a}}};W.render=M;var S=W,L={name:"WaterFall",components:{WaterFallItem:S},props:{data:{type:Array,default:function(){return[]},validator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!t.length||t[0].key}},delay:{type:Boolean,default:!0},gap:{type:[Number,String],default:0},width:{type:[Number,String],default:200}},emits:["ready"],setup:function(t,e){var n=e.emit,a=Object(r["ref"])([]),o=parseInt(t.width)+parseInt(t.gap),c=k(o,t.data),i=c.list,u=c.initData,l=c.setState,p=c.container,f=c.containerWidth,d=c.containerHeight,s=Object(h["debounce"])((function(){for(var t=0,e=a.value,o=0;o<e.length;o++){if(!e[o])break;t=o+1}var c=e.slice(0,t);u(c),c.length>=e.length&&Object(r["nextTick"])((function(){n("ready")}))})),g=function(t,e){a.value[t]=e,s()};return Object(r["watch"])((function(){return t.data}),(function(t){return l(y(t,i.value))})),{list:i,container:p,containerWidth:f,containerHeight:d,padding:Object(r["computed"])((function(){return O(parseInt(t.gap)/2)})),itemWidth:Object(r["computed"])((function(){return O(t.width)})),load:g,loadedData:a}}};n("a0cf");L.render=s;var H=L;H.install=function(t){t.component("WaterFall",H)};var C=H,D=n("9e3c"),P=n.n(D),V={components:{WaterFall:C},data:function(){return{payload:{page:1,size:18},total:0,data:[]}},computed:{hasMore:function(){var t=this.payload,e=t.page,n=t.size;return e*n<this.total}},mounted:function(){this.fetchData()},methods:{preview:function(t,e){var n=e.target,r=n.width,a=n.height;P.a.preview(r?[{src:t,w:r,h:a}]:t)},fetchData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,a,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.payload,a=r.page,o=r.size,c=(a-1)*o,u=Object(i["a"])(Array(t.payload.size).keys()).map((function(t){return{key:t+1+c,src:n("b8f2")("./".concat(t,".jpg"))}})),console.log(u),t.total=500,t.data=[].concat(Object(i["a"])(t.data),Object(i["a"])(u));case 6:case"end":return e.stop()}}),e)})))()},loadMore:function(){this.hasMore&&(this.payload.page+=1,this.fetchData())}}};n("979c");V.render=c;var _=V,z=Object(r["createApp"])(_);z.mount("#app")},"0f89":function(t,e,n){t.exports=n.p+"img/13.cdcf9406.jpg"},1684:function(t,e,n){t.exports=n.p+"img/3.eae6a878.jpg"},1819:function(t,e,n){t.exports=n.p+"img/5.04c9acd8.jpg"},"1a61":function(t,e,n){},2698:function(t,e,n){t.exports=n.p+"img/11.536610b3.jpg"},"3f5c":function(t,e,n){t.exports=n.p+"img/7.fc3b0c32.jpg"},"47fc":function(t,e,n){t.exports=n.p+"img/9.91f6d303.jpg"},5627:function(t,e,n){t.exports=n.p+"img/2.8fe8440b.jpg"},6837:function(t,e,n){t.exports=n.p+"img/12.01cba6ca.jpg"},6976:function(t,e,n){},"6b43":function(t,e,n){t.exports=n.p+"img/4.8b56a9c6.jpg"},"6f09":function(t,e,n){t.exports=n.p+"img/17.237a0f86.jpg"},"7e2c":function(t,e,n){t.exports=n.p+"img/14.885f1df9.jpg"},"96cd":function(t,e,n){t.exports=n.p+"img/16.8d35c40c.jpg"},"979c":function(t,e,n){"use strict";n("6976")},"99d8":function(t,e,n){t.exports=n.p+"img/10.af47333f.jpg"},a0cf:function(t,e,n){"use strict";n("1a61")},a6ea:function(t,e,n){t.exports=n.p+"img/15.29ff0a22.jpg"},af64:function(t,e,n){t.exports=n.p+"img/8.d8090019.jpg"},b8f2:function(t,e,n){var r={"./0.jpg":"b9fe","./1.jpg":"c8d0","./10.jpg":"99d8","./11.jpg":"2698","./12.jpg":"6837","./13.jpg":"0f89","./14.jpg":"7e2c","./15.jpg":"a6ea","./16.jpg":"96cd","./17.jpg":"6f09","./2.jpg":"5627","./3.jpg":"1684","./4.jpg":"6b43","./5.jpg":"1819","./6.jpg":"cc83","./7.jpg":"3f5c","./8.jpg":"af64","./9.jpg":"47fc"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="b8f2"},b9fe:function(t,e,n){t.exports=n.p+"img/0.646b4161.jpg"},c8d0:function(t,e,n){t.exports=n.p+"img/1.ab4528a3.jpg"},cc83:function(t,e,n){t.exports=n.p+"img/6.9bbf9fc9.jpg"}});
//# sourceMappingURL=app.37d23e10.js.map